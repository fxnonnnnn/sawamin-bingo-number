<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ãƒ“ãƒ³ã‚´æ•°å­—ç”Ÿæˆ</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>ğŸŒ¸æ¡œå’Œç¾ã‚†ã¥<br/>ãƒ“ãƒ³ã‚´å¤§ä¼šğŸŒ¸</h1>

  <div class="controls">
    <label for="range">ç¯„å›²é¸æŠï¼š</label>
    <select id="range">
      <option value="1-99">1ã€œ99</option>
      <option value="1-10">1ã€œ10</option>
      <option value="11-20">11ã€œ20</option>
      <option value="21-30">21ã€œ30</option>
      <option value="31-40">31ã€œ40</option>
      <option value="41-50">41ã€œ50</option>
      <option value="51-60">51ã€œ60</option>
      <option value="61-70">61ã€œ70</option>
      <option value="71-80">71ã€œ80</option>
      <option value="81-90">81ã€œ90</option>
      <option value="91-99">91ã€œ99</option>
    </select>
  </div>

  <div class="main-section">
    <div class="number" id="result">--</div>
    <button id="drawButton">æ•°å­—ã‚’å‡ºã™</button>
  </div>

  <div class="history-container" id="historyContainer">
    <h2>å‡ºãŸæ•°å­—ã®å±¥æ­´</h2>
    <div id="history"></div>
  </div>

  <script>
    const result = document.getElementById("result");
    const drawButton = document.getElementById("drawButton");
    const rangeSelect = document.getElementById("range");

    // ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«å‡ºãŸæ•°å­—ã‚’ä¿å­˜ï¼ˆå…±é€šå±¥æ­´ï¼‰
    const drawnSet = new Set();

    // è¡¨ç¤ºã‚°ãƒ«ãƒ¼ãƒ—ï¼ˆUIã®é¸æŠè‚¢ã«å¯¾å¿œã™ã‚‹ãƒ–ãƒ­ãƒƒã‚¯é †ï¼‰
    const displayGroups = [
      { key: "1-10", min: 1, max: 10 },
      { key: "11-20", min: 11, max: 20 },
      { key: "21-30", min: 21, max: 30 },
      { key: "31-40", min: 31, max: 40 },
      { key: "41-50", min: 41, max: 50 },
      { key: "51-60", min: 51, max: 60 },
      { key: "61-70", min: 61, max: 70 },
      { key: "71-80", min: 71, max: 80 },
      { key: "81-90", min: 81, max: 90 },
      { key: "91-99", min: 91, max: 99 }
    ];

    // æŠ½é¸ãƒœã‚¿ãƒ³å‡¦ç†
    drawButton.addEventListener("click", () => {
      const rangeValue = rangeSelect.value;
      const [min, max] = rangeValue.split("-").map(Number);

      // ç¾åœ¨ã®é¸æŠç¯„å›²å†…ã§ã¾ã å‡ºã¦ã„ãªã„æ•°å­—ã®ãƒªã‚¹ãƒˆã‚’ä½œã‚‹ï¼ˆã‚°ãƒ­ãƒ¼ãƒãƒ«å±¥æ­´ã‚’å‚ç…§ï¼‰
      const remaining = [];
      for (let n = min; n <= max; n++) {
        if (!drawnSet.has(n)) remaining.push(n);
      }

      if (remaining.length === 0) {
        result.textContent = "çµ‚äº†";
        alert(`${rangeValue} ã®ç¯„å›²ã¯å…¨ã¦å‡ºã¾ã—ãŸï¼`);
        return;
      }

      // remaining ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã«1ã¤é¸ã¶
      const idx = Math.floor(Math.random() * remaining.length);
      const picked = remaining[idx];

      // è¡¨ç¤ºã¨ä¿å­˜
      result.textContent = picked;
      drawnSet.add(picked);

      renderHistory();
    });

    // å±¥æ­´è¡¨ç¤ºï¼ˆã‚°ãƒ«ãƒ¼ãƒ—ã”ã¨ã«æ˜‡é †ã§è¡¨ç¤ºï¼‰
    function renderHistory() {
      const historyDiv = document.getElementById("history");
      historyDiv.innerHTML = "";

      for (const grp of displayGroups) {
        const numbersInGroup = [];
        for (let n = grp.min; n <= grp.max; n++) {
          if (drawnSet.has(n)) numbersInGroup.push(n);
        }

        const section = document.createElement("div");
        section.classList.add("history-section");

        const title = document.createElement("h3");
        title.textContent = `ç¯„å›² ${grp.key}`;
        section.appendChild(title);

        const list = document.createElement("div");
        list.classList.add("history-numbers");

        // æ˜‡é †ã§è¡¨ç¤ºï¼ˆnumbersInGroup ã¯æ—¢ã«æ˜‡é †ï¼‰
        numbersInGroup.forEach(num => {
          const span = document.createElement("span");
          span.textContent = num;
          list.appendChild(span);
        });

        section.appendChild(list);
        historyDiv.appendChild(section);
      }
    }

    // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«å±¥æ­´ã‚’åˆæœŸè¡¨ç¤ºï¼ˆç©ºã®ãƒ–ãƒ­ãƒƒã‚¯ã‚’è¡¨ç¤ºï¼‰
    renderHistory();
  </script>
</body>
</html>